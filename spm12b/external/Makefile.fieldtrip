#!/usr/bin/env make -f
# FieldTrip Makefile called by {SPM}/external/Makefile
#
# Copyright (C) 2009-2012 Wellcome Trust Centre for Neuroimaging
#
# Guillaume Flandin
# $Id: Makefile.fieldtrip 5148 2012-12-20 18:42:30Z guillaume $

include ../src/Makefile.var

FIELDTRIP =\
	fieldtrip/fileio/@uint64/max.$(SUF) fieldtrip/fileio/@uint64/min.$(SUF) \
	fieldtrip/fileio/@uint64/minus.$(SUF) fieldtrip/fileio/@uint64/plus.$(SUF) \
	fieldtrip/fileio/@uint64/rdivide.$(SUF) fieldtrip/fileio/@uint64/times.$(SUF) \
	fieldtrip/fileio/@uint64/abs.$(SUF) \
	\
	fieldtrip/src/read_24bit.$(SUF) fieldtrip/src/read_16bit.$(SUF) \
	fieldtrip/src/mxSerialize.$(SUF) fieldtrip/src/mxDeserialize.$(SUF) \
	fieldtrip/src/ft_getopt.$(SUF) \
	\
	fieldtrip/src/nanmean.$(SUF) fieldtrip/src/nannumel.$(SUF) \
	fieldtrip/src/nansum.$(SUF) fieldtrip/src/nanvar_base.$(SUF) \
	\
	fieldtrip/src/meg_leadfield1.$(SUF) fieldtrip/src/ptriproj.$(SUF) \
	fieldtrip/src/lmoutr.$(SUF) fieldtrip/src/plgndr.$(SUF) \
	fieldtrip/src/solid_angle.$(SUF) fieldtrip/src/routlm.$(SUF) \
	fieldtrip/src/ltrisect.$(SUF) fieldtrip/src/plinproj.$(SUF) \
	fieldtrip/src/splint_gh.$(SUF)

all: $(FIELDTRIP)

clean:

distclean: clean
	$(DEL) $(FIELDTRIP)
        
install:
	$(COPY) fieldtrip/src/read_24bit.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/mxSerialize.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/mxDeserialize.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/read_16bit.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/nanmean.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/nannumel.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/nansum.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/nanvar_base.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/ft_getopt.$(SUF) fieldtrip/fileio/private/
	$(COPY) fieldtrip/src/solid_angle.$(SUF) fieldtrip/fileio/private/

	$(COPY) fieldtrip/src/meg_leadfield1.$(SUF) fieldtrip/forward/private/
	$(COPY) fieldtrip/src/ptriproj.$(SUF) fieldtrip/forward/private/
	$(COPY) fieldtrip/src/lmoutr.$(SUF) fieldtrip/forward/private/
	$(COPY) fieldtrip/src/plgndr.$(SUF) fieldtrip/forward/private/
	$(COPY) fieldtrip/src/solid_angle.$(SUF) fieldtrip/forward/private/
	$(COPY) fieldtrip/src/routlm.$(SUF) fieldtrip/forward/private/
	$(COPY) fieldtrip/src/ft_getopt.$(SUF) fieldtrip/forward/private/
	
	$(COPY) fieldtrip/src/solid_angle.$(SUF) fieldtrip/inverse/private/
	$(COPY) fieldtrip/src/ft_getopt.$(SUF) fieldtrip/inverse/private/
	
	$(COPY) fieldtrip/src/ptriproj.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/lmoutr.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/plgndr.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/routlm.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/solid_angle.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/nanmean.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/nannumel.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/nansum.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/nanvar_base.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/mxSerialize.$(SUF) fieldtrip/private/
	$(COPY) fieldtrip/src/mxDeserialize.$(SUF) fieldtrip/private/

	$(COPY) fieldtrip/src/ft_getopt.$(SUF) fieldtrip/utilities/
	$(COPY) fieldtrip/src/nanmean.$(SUF) fieldtrip/utilities/private/
	$(COPY) fieldtrip/src/nannumel.$(SUF) fieldtrip/utilities/private/
	$(COPY) fieldtrip/src/nansum.$(SUF) fieldtrip/utilities/private/
	$(COPY) fieldtrip/src/nanvar_base.$(SUF) fieldtrip/utilities/private/
	$(COPY) fieldtrip/src/mxSerialize.$(SUF) fieldtrip/utilities/private/
	$(COPY) fieldtrip/src/ptriproj.$(SUF) fieldtrip/utilities/private/
	$(COPY) fieldtrip/src/lmoutr.$(SUF) fieldtrip/utilities/private/

	$(COPY) fieldtrip/src/nanmean.$(SUF) fieldtrip/connectivity/private/
	$(COPY) fieldtrip/src/nannumel.$(SUF) fieldtrip/connectivity/private/
	$(COPY) fieldtrip/src/nansum.$(SUF) fieldtrip/connectivity/private/
	$(COPY) fieldtrip/src/nanvar_base.$(SUF) fieldtrip/connectivity/private/
	$(COPY) fieldtrip/src/ft_getopt.$(SUF) fieldtrip/connectivity/private/

	$(COPY) fieldtrip/src/nanmean.$(SUF) fieldtrip/statfun/private/
	$(COPY) fieldtrip/src/nannumel.$(SUF) fieldtrip/statfun/private/
	$(COPY) fieldtrip/src/nansum.$(SUF) fieldtrip/statfun/private/
	$(COPY) fieldtrip/src/nanvar_base.$(SUF) fieldtrip/statfun/private/

tarball: all
	$(TAR) -cf fieldtrip_mex.tar $(FIELDTRIP)

fieldtrip/src/%.$(SUF) : fieldtrip/src/%.c
	$(MEX) $< -outdir $(dir $<) $(MEXEND)

fieldtrip/fileio/@uint64/%.$(SUF) : fieldtrip/fileio/@uint64/%.c
	$(MEX) $< -outdir $(dir $<) $(MEXEND)

fieldtrip/src/lmoutr.$(SUF): fieldtrip/src/lmoutr.c fieldtrip/src/geometry.c fieldtrip/src/geometry.h
	$(MEX) $< -outdir $(dir $<) fieldtrip/src/geometry.c $(MEXEND)

fieldtrip/src/routlm.$(SUF): fieldtrip/src/routlm.c fieldtrip/src/geometry.c fieldtrip/src/geometry.h
	$(MEX) $< -outdir $(dir $<) fieldtrip/src/geometry.c $(MEXEND)

fieldtrip/src/ptriproj.$(SUF): fieldtrip/src/ptriproj.c fieldtrip/src/geometry.c fieldtrip/src/geometry.h
	$(MEX) $< -outdir $(dir $<) fieldtrip/src/geometry.c $(MEXEND)

fieldtrip/src/solid_angle.$(SUF): fieldtrip/src/solid_angle.c fieldtrip/src/geometry.c fieldtrip/src/geometry.h
	$(MEX) $< -outdir $(dir $<) fieldtrip/src/geometry.c $(MEXEND)

fieldtrip/src/ltrisect.$(SUF): fieldtrip/src/ltrisect.c fieldtrip/src/geometry.c fieldtrip/src/geometry.h
	$(MEX) $< -outdir $(dir $<) fieldtrip/src/geometry.c $(MEXEND)

fieldtrip/src/plinproj.$(SUF): fieldtrip/src/plinproj.c fieldtrip/src/geometry.c fieldtrip/src/geometry.h
	$(MEX) $< -outdir $(dir $<) fieldtrip/src/geometry.c $(MEXEND)
